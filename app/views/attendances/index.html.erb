<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendances - College Management System</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "application", media: "all" %>
    <%= stylesheet_link_tag "attendances", media: "all" %>
    <%= javascript_importmap_tags %>
</head>
<body>
    <header>
        <div class="container">
            <h1>College Management System</h1>
        </div>
    </header>

    <nav>
        <ul>
            <li><%= link_to 'Home', root_path %></li>
            <li><%= link_to 'Lecturers', lecturers_path %></li>
            <li><%= link_to 'Courses', courses_path %></li>
            <li><%= link_to 'Students', students_path %></li>
            <li><%= link_to 'Grades', grades_path %></li>
            <li><%= link_to 'Enrollments', enrollments_path %></li>
            <li><%= link_to 'Attendances', attendances_path %></li>
        </ul>
    </nav>

    <div class="wrapper">
        <div class="container">
            <div class="content">
                <h2>Attendances</h2>
                
                <% if notice %>
                    <p class="notice"><%= notice %></p>
                <% end %>
                
                <table class="attendances-table">
                <thead>
                    <tr>
                        <th>Student</th>
                        <th>Course</th>
                        <th>Date</th>
                        <th>Status</th>
                        <th colspan="2">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% @attendances.each do |attendance| %>
                    <tr>
                        <td><%= attendance.enrollment.student.name %></td>
                        <td><%= attendance.enrollment.course.title %></td>
                        <td><%= attendance.date.strftime("%d/%m/%y") %></td>
                        <td><%= attendance.status %></td>
                        <td>
                            <%= link_to 'Edit', edit_attendance_path(attendance), class: 'btn' %>
                            <%= link_to 'Delete', attendance, method: :delete, data: { confirm: 'Are you sure?', turbo_method: :delete }, class: 'btn btn-danger' %>
                        </td>
                    </tr>
                    <% end %>
                </tbody>
                </table>
                
                <br>
                
                <%= link_to 'New Attendance', new_attendance_path, class: 'btn' %>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 College Management System. All rights reserved.</p>
    </footer>
</body>
</html>